# ========================================
# CLOTHING INVENTORY SYSTEM
# ========================================

inventory.getopurtunity.online {
    # Redirect www to non-www
    redir https://inventory.getopurtunity.online{uri} permanent
    
    # Frontend
    reverse_proxy http://localhost:3003
    
    # Security headers
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        X-XSS-Protection "1; mode=block"
        Referrer-Policy strict-origin-when-cross-origin
    }
}

# API endpoint
inventory.getopurtunity.online/api/* {
    uri strip_prefix /api
    reverse_proxy http://localhost:3002
    
    # CORS headers
    header Access-Control-Allow-Origin *
    header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    header Access-Control-Allow-Headers "Content-Type, Authorization"
}

# Auto HTTPS with Let's Encrypt
tls {
    protocols tls1.2 tls1.3
}